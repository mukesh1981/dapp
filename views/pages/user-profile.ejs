<%- include('../partials/header'); %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<main style="margin-top: 58px">
<div class="container pt-4">
<section class="mb-4">

 <div class="card">
      <div class="card-header text-center py-3">
        <div class="card-header">

                    <h2 class="text-info">Profiles</h2>

                </div>
      </div>
<!-- Default form register -->
<form>
 <div class="row mb-4">
 <div class="col">
      <div class="form-outline">
        <input type="text" id="metamaskid" value="" class="form-control" />
        <label class="form-label" for="metamaskid">MetaMask Wallet id</label>
      </div>
    </div>
    <div class="col">
      <div class="form-outline">
        <input type="text" id="userid" class="form-control" />
        <label class="form-label" for="userid">User Id</label>
      </div>
    </div>

    
  </div>
  <!-- 2 column grid layout with text inputs for the first and last names -->
  <div class="row mb-4">
    <div class="col">
      <div class="form-outline">
        <input type="text" id="form3Example1" class="form-control" />
        <label class="form-label" for="form3Example1">First name</label>
      </div>
    </div>
    <div class="col">
      <div class="form-outline">
        <input type="text" id="form3Example2" class="form-control" />
        <label class="form-label" for="form3Example2">Last name</label>
      </div>
    </div>
  </div>
  <div class="row mb-4">
  <div class="col">
  <!-- Email input -->
  <div class="form-outline">
    <input type="email" id="form3Example3" class="form-control" />
    <label class="form-label" for="form3Example3">Email address</label>
  </div>
  </div>
  <div class="col">
  <div class="form-outline">
    <input type="password" id="mobileno" class="form-control" />
    <label class="form-label" for="mobileno">Mobile No</label>
  </div>
  </div>
  </div>
  <div class="row mb-4">
  <div class="col">
   <div class="card-body">

                    <div class="form-group">

                        <label for="country">Country</label>

                        <select class="form-control" id="countryData">

                            <option value="">Select Country</option>

                            <% if(data.length){

                                for(var i = 0; i< data.length; i++) {%> 

                                    <option value="<%= data[i].id%>">

                                        <%= data[i].name%>

                                    </option>

                                <% } 

                            } %>

                        </select>  

                    </div>

                    <div class="form-group">

                        <label for="state">City</label>

                        <select class="form-control" id="state-dropdown">
                          <option value="">Select City</option>

                          
                        </select>

                    </div>                        

                   

                </div>
  </div>
  <div class="col">
    <div class="card-body">

                    <div class="form-group">

                        <label for="country">State</label>

                        <select class="form-control" id="countryData">

                            <option value="">Select State</option>

                            

                        </select>  

                    </div>

                    <div class="col">
                    <br>
  <div class="form-outline">
    <input type="password" id="zipcode" class="form-control" />
    <label class="form-label" for="zipcode">Zip Code</label>
  </div>

                    </div>                        

                   

                </div>
  </div>
  </div>

 
  <!-- Submit button -->
   <div class="row mb-2">
  <p align="center"><br> <button type="submit" class="btn btn-primary center" type="submit">Submit</button></p>
</div>
 
</form>
<!-- Default profile form -->
 
<script >

    $(document).ready(function() {

        $('#countryData').on('change', function() {

            var country_id = this.value;
            console.log(country_id);
            //alert("Muksjsdsdf")

            $("#state-dropdown").html('');

            $.ajax({

                url: "http://localhost:3000/get-states-by-country",

                type: "POST",

                data: {

                    name: 'country',

                    country_id: country_id,

                },


                dataType: 'json',

                success: function(result) {

                    $('#state-dropdown').html('<option value="">Select State</option>');

                    $.each(result.states, function(key, value) {

                        $("#state-dropdown").append('<option value="' + value.id + '">' + value.name + '</option>');

                    });

                

                    $('#city-dropdown').html('<option value="">Select State First</option>');

                }

            });

        });

        

        $('#state-dropdown').on('change', function() {

            var state_id = this.value;

            $("#city-dropdown").html('');

            $.ajax({

                url: "http://localhost:3000/get-cities-by-state",

                type: "POST",

                data: {

                    name: 'state',

                    state_id: state_id,

                },


                dataType: 'json',

                success: function(result) {

                    $('#city-dropdown').html('<option value="">Select City</option>');

                    $.each(result.cities, function(key, value) {

                        $("#city-dropdown").append('<option value="' + value.id + '">' + value.name + '</option>');

                    });

                }

            });

        });

    }); 

</script>
  </section>
  </div>
  </main>



</div>
  <%- include('../partials/footer'); %>